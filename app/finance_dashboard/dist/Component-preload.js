//@ui5-bundle financedashboard/Component-preload.js
sap.ui.require.preload({
	"financedashboard/Component.js":function(){
sap.ui.define(["sap/fe/core/AppComponent"],function(e){"use strict";return e.extend("financedashboard.Component",{metadata:{manifest:"json"}})});
},
	"financedashboard/ext/detail/Detail.controller.js":function(){
sap.ui.define(["sap/fe/core/PageController","sap/m/MessageBox"],function(e,t){"use strict";const{ajax:n}=$;let o,r,a,c;return e.extend("financedashboard.ext.main.Main",{onInit:function(){o=new sap.ui.model.json.JSONModel({editable:true,financeApprove:true,financeComments:""});this.getAppComponent().getRouter(this).getRoute("TravelRequestDetail").attachPatternMatched(this._onDetailMatched,this);r=this.getView();r.setModel(o,"localModel");c=this.getAppComponent().getModel().getServiceUrl()},onEmail:function(e){window.open("mailto:"+e.getSource().getText())},onShare:function(){const e=window.location.href,t="Check out this Travel Plan!",n="Hi,\n\nI found this interesting travel plan. Check it out: "+e,o=document.createElement("a"),r="mailto:?subject="+encodeURIComponent(t)+"&body="+encodeURIComponent(n);o.href=r;o.click()},_onDetailMatched:function(e){a=e.getParameter("arguments").ID;const t=r.byId("idObjectPageLayout");r.setBusy(true);t.bindElement("/TravelRequest("+a+")");setTimeout(function(){r.setBusy(false)},1e3);n({method:"GET",url:c+`TravelRequest(${a})/financenotes/$value`,success:function(e){o.setProperty("/financeComments",e||"")},error:console.error})},onApproveReject:function(e){const{financeComments:a}=o.getData(),i=e.getSource().getText()==="Approve",{REQID:s,emailid:u,firstname:d,empid:p}=r.byId("idObjectPageLayout").getBindingContext().getObject();if(!a){t.error("Please add finance comments");return}t.confirm(`Are you sure you want to ${i?"approve":"reject"} this travel request?`,{onClose:function(e){if(e===t.Action.OK){n({method:"POST",url:c+"updateRequest",headers:{"Content-Type":"application/json"},data:JSON.stringify({REQID:s,reqstatus:i?"ApprovedF":"RejectedF",financenotes:a,emailid:u,firstname:d,empid:p}),success:function(){t.success("State Updated",{onClose:function(){window.history.go(-1)}})},error:console.error})}}.bind(this)})},_onFormatState:function(e){if(!e){return}switch(e){case"ApprovedF":case"ApprovedM":return"Success";case"RejectedF":case"RejectedM":return"Error";case"Completed":return"Success";default:return"Warning"}},_onFormatStateIcon:function(e){if(!e){return}switch(e){case"ApprovedF":case"ApprovedM":return"sap-icon://accept";case"RejectedF":case"RejectedM":return"sap-icon://error";case"Completed":return"sap-icon://completed";default:return"sap-icon://pending"}},_onFormatStateText:function(e){if(!e){return}switch(e){case"ApprovedF":case"ApprovedM":return"Approved";case"RejectedF":case"RejectedM":return"Rejected";case"Completed":return"Completed";default:return"Pending"}},_onGetDaysLeftFromToday:function(e){if(!e){return"0"}const t=new Date;const n=(-t.getTime()+new Date(e).getTime())/(1e3*60*60*24);return Math.ceil(n)}})});
},
	"financedashboard/ext/detail/Detail.view.xml":'<mvc:View xmlns:core="sap.ui.core" xmlns:mvc="sap.ui.core.mvc" height="100%" xmlns="sap.uxap"\n    xmlns:f="sap.ui.layout.form"\n    xmlns:layout="sap.ui.layout" xmlns:m="sap.m" controllerName="financedashboard.ext.detail.Detail"><ObjectPageLayout id="idObjectPageLayout" enableLazyLoading="true"\n        beforeNavigate="onBeforeNavigate" useIconTabBar="false" showFooter="true"\n        showTitleInHeaderContent="true" upperCaseAnchorBar="false" sectionChange="onSectionChange"><headerTitle><ObjectPageDynamicHeaderTitle><expandedHeading><m:Title text="{firstname} {lastname}" wrapping="true" /></expandedHeading><snappedHeading><m:FlexBox fitContainer="true" alignItems="Center"><m:Avatar class="sapUiTinyMarginEnd" /><m:Title text="{firstname} {lastname}" wrapping="true" /></m:FlexBox></snappedHeading><expandedContent><m:Text text="{empid}" /></expandedContent><snappedContent><m:Text text="{empid}" /></snappedContent><snappedTitleOnMobile><m:Title text="{empid}" /></snappedTitleOnMobile><actions><m:Button type="Ghost" icon="sap-icon://share-2" press="onShare" text="Share" /></actions></ObjectPageDynamicHeaderTitle></headerTitle><headerContent><m:HeaderContainer id="headerContainer" scrollStep="200" showDividers="false"><m:HBox class="sapUiSmallMarginEnd sapUiSmallMarginBottom"><m:Avatar class="sapUiMediumMarginEnd sapUiSmallMarginBottom" displaySize="XL" /><m:VBox class="sapUiSmallMarginBottom"><m:Title text="Travel Request" class="sapUiTinyMarginBottom" /><m:HBox class="sapUiTinyMarginBottom" renderType="Bare"><m:Label text="Request ID:" class="sapUiTinyMarginEnd" /><m:Text text=" {REQID}" /></m:HBox><m:HBox class="sapUiTinyMarginBottom" renderType="Bare"><m:Label text="Request Number:" class="sapUiTinyMarginEnd" /><m:Text text=" {ReqNo}" /></m:HBox><m:HBox class="sapUiTinyMarginBottom" renderType="Bare"><m:Label text="Employee ID:" class="sapUiTinyMarginEnd" /><m:Text text=" {empid}" /></m:HBox><m:HBox><m:Label text="Department:" class="sapUiTinyMarginEnd" /><m:Text text=" {dept}" /></m:HBox></m:VBox></m:HBox><m:VBox class="sapUiSmallMarginEnd sapUiSmallMarginBottom"><m:Title text="Contact Information" class="sapUiTinyMarginBottom" /><m:HBox><core:Icon src="sap-icon://email" /><m:Link press="onEmail" text="{emailid}" class="sapUiSmallMarginBegin" /></m:HBox></m:VBox><m:VBox class="sapUiSmallMarginEnd sapUiSmallMarginBottom"><m:HBox class="sapUiTinyMarginBottom"><m:Label text="Created By:" class="sapUiSmallMarginEnd" /><m:Text text="{createdBy}" /></m:HBox><m:HBox class="sapUiTinyMarginBottom" renderType="Bare"><m:Label text="Created On:" class="sapUiSmallMarginEnd" /><m:Text text="{createdAt}" /></m:HBox><m:HBox class="sapUiTinyMarginBottom"><m:Label text="Changed By:" class="sapUiSmallMarginEnd" /><m:Text text="{modifiedBy}" /></m:HBox><m:HBox renderType="Bare"><m:Label text="Changed On:" class="sapUiSmallMarginEnd" /><m:Text text="{modifiedAt}" /></m:HBox></m:VBox><m:VBox class="sapUiSmallMarginEnd sapUiSmallMarginBottom"><m:Title text="Request Status" class="sapUiTinyMarginBottom" /><m:ObjectStatus text="{path: \'reqstatus\', formatter: \'._onFormatStateText\'}"\n                        state="{path: \'reqstatus\', formatter: \'._onFormatState\'}"\n                        class="sapMObjectStatusLarge" /></m:VBox><m:VBox class="sapUiSmallMarginEnd sapUiSmallMarginBottom"><m:Title text="Day\'s Left" class="sapUiTinyMarginBottom" /><m:ObjectStatus\n                        text="{path: \'departdate\', formatter: \'._onGetDaysLeftFromToday\'} Days"\n                        icon="sap-icon://journey-depart"\n                        class="sapMObjectStatusLarge" /></m:VBox><m:VBox class="sapUiSmallMarginEnd sapUiSmallMarginBottom"><m:Title text="Destination City" class="sapUiTinyMarginBottom" /><m:Text text="{destcity}" /></m:VBox></m:HeaderContainer></headerContent><sections><ObjectPageSection titleUppercase="false" title="Travel Request"><subSections><ObjectPageSubSection><f:Form editable="true"><f:layout><f:ColumnLayout /></f:layout><f:formContainers><f:FormContainer><f:formElements><f:FormElement label="Travel Preferences"><f:fields><m:SegmentedButton selectedKey="{travelpreference}"\n                                                    width="100%" enabled="false"><m:items><m:SegmentedButtonItem text="Airline"\n                                                            key="0" /><m:SegmentedButtonItem text="Car" key="1" /><m:SegmentedButtonItem text="Train" key="2" /></m:items></m:SegmentedButton></f:fields></f:FormElement><f:FormElement label="Airlines"><f:fields><m:SegmentedButton selectedKey="{traveltype}"\n                                                    width="100%" enabled="false"><m:items><m:SegmentedButtonItem text="Domestic"\n                                                            key="0" /><m:SegmentedButtonItem text="International"\n                                                            key="1" /></m:items></m:SegmentedButton></f:fields></f:FormElement><f:FormElement\n                                            label="Travel Purpose"><f:fields><m:Text text="{purposeoftravel}" width="100%" /></f:fields></f:FormElement><f:FormElement\n                                            label="Departure City"><f:fields><m:Text text="{departcity}" width="100%" /></f:fields></f:FormElement><f:FormElement\n                                            label="Destination City"><f:fields><m:Text text="{destcity}" width="100%" /></f:fields></f:FormElement><f:FormElement\n                                            label="Trip Type"><f:fields><m:SegmentedButton selectedKey="{triptype}"\n                                                    width="100%" enabled="false"><m:items><m:SegmentedButtonItem text="One Way"\n                                                            key="One way" /><m:SegmentedButtonItem text="Round Trip"\n                                                            key="Round trip" /></m:items></m:SegmentedButton></f:fields></f:FormElement><f:FormElement\n                                            label="Departure Date"><f:fields><m:DatePicker value="{departdate}" width="100%"\n                                                    editable="false" /></f:fields></f:FormElement><f:FormElement\n                                            label="Return Date"><f:fields><m:DatePicker value="{returndate}" width="100%"\n                                                    editable="false" /></f:fields></f:FormElement><f:FormElement\n                                            label="Do you need accomodation?"><f:fields><m:SegmentedButton selectedKey="{accomodation}"\n                                                    enabled="false" width="100%"><m:items><m:SegmentedButtonItem text="Yes"\n                                                            key="Yes" /><m:SegmentedButtonItem text="No"\n                                                            key="No" /></m:items></m:SegmentedButton></f:fields></f:FormElement><f:FormElement\n                                            label="If yes, any Preference?"><f:fields><m:Text text="{accpreference}" width="100%" /></f:fields></f:FormElement><f:FormElement\n                                            label="Attachment"><f:fields></f:fields></f:FormElement><f:FormElement\n                                            label="Additional Information"><f:fields><m:Text width="100%" /></f:fields></f:FormElement></f:formElements></f:FormContainer></f:formContainers></f:Form></ObjectPageSubSection></subSections></ObjectPageSection><ObjectPageSection title="Comments" titleUppercase="false"><subSections><ObjectPageSubSection title="Manager Comment"><m:FlexBox direction="Column"><m:Label text="Comment" /><m:TextArea editable="false" value="{mgrnotes}" width="100%" /></m:FlexBox></ObjectPageSubSection><ObjectPageSubSection title="Finance Comment"><m:FlexBox direction="Column"><m:Label text="Comment" /><m:TextArea value="{localModel>/financeComments}" width="100%" /></m:FlexBox></ObjectPageSubSection></subSections></ObjectPageSection></sections><footer><m:OverflowToolbar><m:ToolbarSpacer /><m:Button\n                    press="onApproveReject"\n                    type="Success"\n                    text="Approve"\n                    icon="sap-icon://employee-approvals"\n                /><m:Button\n                    press="onApproveReject"\n                    type="Reject"\n                    text="Reject"\n                    icon="sap-icon://employee-rejections"\n                /></m:OverflowToolbar></footer></ObjectPageLayout></mvc:View>',
	"financedashboard/ext/main/Main.controller.js":function(){
sap.ui.define(["sap/fe/core/PageController","sap/m/MessageToast","sap/ui/export/Spreadsheet","sap/ui/model/json/JSONModel"],function(e,t,n,r){"use strict";const{ajax:o}=$;let a,s;return e.extend("financedashboard.ext.main.Main",{onInit:function(){a=new r({KPI:[{header:"Pending Approvals",subHeader:"Pending",value:0,valueColor:"Critical"},{header:"Approved Requests",subHeader:"Approved",value:0,valueColor:"Good"},{header:"Rejected Requests",subHeader:"Rejected",value:0,valueColor:"Error"}]});s=this.getView();s.setModel(a,"localModel");this.getAppComponent().getRouter(this).getRoute("TravelRequestMain").attachPatternMatched(this._onMainMatched,this)},onAfterRendering:function(){},_onFetchTableAndKPI:function(){const e=this.getOwnerComponent().getModel().getServiceUrl(),{KPI:t}=a.getData(),n=t.map(function(t){return o({method:"GET",url:`${e}TravelRequest/$count?$filter=startswith(reqstatus,'${t.subHeader}')`})});s.setBusy(true);Promise.all(n).then(function(e){a.setProperty("/KPI",t.map(function(t,n){t.value=e[n];return t}))}).catch(console.error).finally(function(){s.setBusy(false)});s.byId("idTable").getBinding("items").refresh()},_onMainMatched:function(){this._onFetchTableAndKPI()},onShare:function(){const e=window.location.href,t="Check out this Travel Plan!",n="Hi,\n\nI found this interesting travel plan. Check it out: "+e,r=document.createElement("a"),o="mailto:?subject="+encodeURIComponent(t)+"&body="+encodeURIComponent(n);r.href=o;r.click()},onExport:function(e){const r=this.getView().byId("idTable");if(e==="CSV"){sap.ui.core.util.File.save(["Request No.,Employee Name,Department,Travel Purpose,Travel Status",...r.getItems().map(e=>e.getCells().map(e=>`"${e.getText()}"`).join(","))].join("\n"),"TravelPlans","csv","text/csv",true)}else if(e==="XLSX"){const e=[{label:"Request No.",property:"REQID",type:"string"},{label:"Employee Name",property:["firstname","lastname"],type:"string"},{label:"Department",property:"dept",type:"string"},{label:"Travel Purpose",property:"purposeoftravel",type:"string"},{label:"Travel Status",property:"reqstatus",type:"string"}],o={workbook:{columns:e,hierarchyLevel:"Level"},dataSource:r.getBinding("items"),fileName:"TravelPlans.xlsx",worker:false},a=new n(o);a.build().then(function(){t.show("Spreadsheet export has finished successfully.")}).catch(function(e){t.show("Error when downloading spreadsheet. "+e)}).finally(function(){a.destroy()})}},onNavigate:function(e){const t=this.getAppComponent().getRouter(this),n=e.getSource().getBindingContext().getObject("ID");t.navTo("TravelRequestDetail",{ID:n})},onExit:function(){clearInterval(this._RefreshInterval)},_onFormatState:function(e){if(!e){return}switch(e){case"ApprovedF":case"ApprovedM":return"Success";case"RejectedF":return"Error";case"Completed":return"Success";default:return"Warning"}},_onFormatStateIcon:function(e){if(!e){return}switch(e){case"ApprovedF":case"ApprovedM":return"sap-icon://accept";case"RejectedF":return"sap-icon://error";case"Completed":return"sap-icon://completed";default:return"sap-icon://pending"}},_onFormatStateText:function(e){if(!e){return}switch(e){case"ApprovedF":case"ApprovedM":return"Approved";case"RejectedF":case"RejectedM":return"Rejected";case"Completed":return"Completed";default:return"Pending"}}})});
},
	"financedashboard/ext/main/Main.view.xml":'<mvc:View\n    xmlns:c="sap.ui.core"\n    xmlns:mvc="sap.ui.core.mvc"\n    xmlns:u="sap.ui.unified"\n    xmlns="sap.m"\n    xmlns:t="sap.ui.table"\n    xmlns:f="sap.f"\n    xmlns:layout="sap.ui.layout"\n    height="100%"\n    controllerName="financedashboard.ext.main.Main"\n><f:DynamicPage\n        preserveHeaderStateOnScroll="true"\n        headerExpanded="true"\n        showFooter="true"\n        fitContent="true"\n    ><f:title><f:DynamicPageTitle><f:heading><Title\n                        text="{i18n>appTitle}"\n                        level="H1"\n                    /></f:heading><f:expandedContent><Label text="{i18n>appDescription}" /></f:expandedContent><f:snappedContent><Label text="{i18n>appDescription}" /></f:snappedContent><f:actions><ToolbarSpacer /><Button\n                        text="Share"\n                        press="onShare"\n                        icon="sap-icon://share-2"\n                        type="Emphasized"\n                    /></f:actions></f:DynamicPageTitle></f:title><f:header><f:DynamicPageHeader pinnable="true"><FlexBox\n                    items="{localModel>/KPI}"\n                    justifyContent="SpaceAround"\n                    wrap="Wrap"\n                ><GenericTile\n                        class="sapUiTinyMargin"\n                        header="{localModel>header}"\n                        frameType="OneByHalf"\n                    ><TileContent unit="INR"><NumericContent\n                                value="{localModel>value}"\n                                valueColor="{localModel>valueColor}"\n                                withMargin="true"\n                            /></TileContent></GenericTile></FlexBox></f:DynamicPageHeader></f:header><f:content><Table\n                id="idTable"\n                modeAnimationOn="true"\n                growing="true"\n                alternateRowColors="true"\n                growingScrollToLoad="true"\n                items="{path: \'/TravelRequest\', sorter: [{path: \'createdAt\', descending:true}]}"\n            ><headerToolbar><Toolbar><Title text="Travel Plan ({= ${/TravelRequest/$count}})" /><ToolbarSpacer /><MenuButton\n                            icon="sap-icon://excel-attachment"\n                            text="Export"\n                            type="Success"\n                        ><menu><Menu><items><MenuItem\n                                            text="Export as CSV"\n                                            icon="sap-icon://document-text"\n                                            press="onExport(\'CSV\')"\n                                        /><MenuItem\n                                            text="Export as Excel"\n                                            icon="sap-icon://excel-attachment"\n                                            press="onExport(\'XLSX\')"\n                                        /></items></Menu></menu></MenuButton></Toolbar></headerToolbar><columns><Column hAlign="Center"><Text text="Request No." /></Column><Column hAlign="Center"><Text text="Employee Name" /></Column><Column hAlign="Center"><Text text="Department" /></Column><Column hAlign="Center"><Text text="Travel Purpose" /></Column><Column hAlign="Center"><Text text="Travel Status" /></Column></columns><items><ColumnListItem type="Navigation" press="onNavigate"><cells><Text text="{REQID}" /><Text text="{firstname} {lastname}" /><Text text="{dept}" /><Text text="{purposeoftravel}" /><ObjectStatus\n                                text="{path: \'reqstatus\', formatter: \'._onFormatStateText\'}"\n                                icon="{path: \'reqstatus\', formatter: \'._onFormatStateIcon\'}"\n                                state="{path: \'reqstatus\', formatter: \'._onFormatState\'}" /></cells></ColumnListItem></items><noData><IllustratedMessage /></noData></Table></f:content><f:footer><OverflowToolbar><ToolbarSpacer /><Button\n                    type="Critical"\n                    text="Exit"\n                    icon="sap-icon://close-command-field"\n                /></OverflowToolbar></f:footer></f:DynamicPage></mvc:View>',
	"financedashboard/i18n/i18n.properties":'# This is the resource bundle for financedashboard\n\n#Texts for manifest.json\n\n#XTIT: Application name\nappTitle=Finance Dashboard\n\n#YDES: Application description\nappDescription=Finance Dashboard is your all-in-one solution for tracking, managing, and optimizing your finances with real-time insights.\n#XTIT: Custom view title\nMainTitle=Main\n\n#XFLD,51\nflpTitle=Finance Dashboard\n\n#XFLD,63\nflpTitle=Travel Request Portal\n',
	"financedashboard/manifest.json":'{"_version":"1.65.0","sap.app":{"id":"financedashboard","type":"application","i18n":"i18n/i18n.properties","applicationVersion":{"version":"0.0.1"},"title":"{{appTitle}}","description":"{{appDescription}}","resources":"resources.json","sourceTemplate":{"id":"@sap/generator-fiori:fpm","version":"1.15.1","toolsId":"8c33b601-96e4-4779-8ced-da3228606811"},"dataSources":{"mainService":{"uri":"finance/","type":"OData","settings":{"annotations":[],"odataVersion":"4.0"}}},"crossNavigation":{"inbounds":{"Finance_Dashboard-Display":{"semanticObject":"Finance_Dashboard","action":"Display","title":"{{flpTitle}}","icon":"sap-icon://bbyd-dashboard","signature":{"parameters":{},"additionalParameters":"allowed"}},"ftravelreq-Display":{"semanticObject":"ftravelreq","action":"Display","title":"{{flpTitle}}","signature":{"parameters":{},"additionalParameters":"allowed"}}}}},"sap.ui":{"technology":"UI5","icons":{"icon":"","favIcon":"","phone":"","phone@2":"","tablet":"","tablet@2":""},"deviceTypes":{"desktop":true,"tablet":true,"phone":true}},"sap.ui5":{"flexEnabled":false,"dependencies":{"minUI5Version":"1.129.1","libs":{"sap.m":{},"sap.ui.core":{},"sap.fe.core":{}}},"contentDensities":{"compact":true,"cozy":true},"models":{"i18n":{"type":"sap.ui.model.resource.ResourceModel","settings":{"bundleName":"financedashboard.i18n.i18n"}},"":{"dataSource":"mainService","preload":true,"settings":{"operationMode":"Server","autoExpandSelect":true,"earlyRequests":true}},"@i18n":{"type":"sap.ui.model.resource.ResourceModel","uri":"i18n/i18n.properties"}},"resources":{"css":[{"uri":"style/style.css"}]},"routing":{"config":{},"routes":[{"name":"TravelRequestMain","pattern":":?query:","target":"TravelRequestMain"},{"name":"TravelRequestDetail","pattern":"TravelID/{ID}:?query:","target":"TravelRequestDetail"}],"targets":{"TravelRequestMain":{"type":"Component","id":"TravelRequestMain","name":"sap.fe.core.fpm","options":{"settings":{"contextPath":"/TravelRequest","viewName":"financedashboard.ext.main.Main"}}},"TravelRequestDetail":{"type":"Component","id":"TravelRequestDetail","name":"sap.fe.core.fpm","options":{"settings":{"navigation":{},"contextPath":"/TravelRequest","viewName":"financedashboard.ext.detail.Detail"}}}}}},"sap.cloud":{"public":true,"service":"TravelReq-router"}}'
});
//# sourceMappingURL=Component-preload.js.map
